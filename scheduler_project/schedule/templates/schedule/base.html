{% load static %}
{% load auth_extras %}

<!doctype html>
<html lang="pl">



<head>
	<title>FFT - Food For Thought</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="{% static 'images/icons/favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'css/datatables.bootstrap4.min.css' %}" rel="stylesheet">
</head>
  <body>
  {% include 'schedule/navbar.html' %}

{% block content %}



    <script src="{% static 'js/select2.min.js' %}"></script>
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/jquery.datatables.min.js' %}"></script>
    <script src="{% static 'js/datatables.bootstrap4.min.js' %}"></script>
    <script src="https://cdn.jsdeliver.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

<script>
$(document).ready(function () {
            $('#dataTable').DataTable();
        });
</script>

  <script>
    var csrftoken = Cookies.get('csrftoken');
    function csrfSafeMethod(method) {
      // these HTTP methods do not require CSRF protection
      return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }
    $.ajaxSetup({
      beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
          xhr.setRequestHeader("X-CSRFToken", csrftoken);
        }
      }
    });

    $(document).ready(function(){
        $('a.like').click(function(e){
    e.preventDefault();
    $.post('{% url "ajax_like" %}',
      {
        id: $(this).data('id'),
        action: $(this).data('action')
      },
      function(data){
        if (data['status'] == 'ok')
        {
          var previous_action = $('a.like').data('action');

          // toggle data-action
          $('a.like').data('action', previous_action == 'like' ?
          'unlike' : 'like');
          // toggle link text
          $('a.like').text(previous_action == 'like' ? 'Unlike' :
          'Like');

          // update total likes
          var previous_likes = parseInt($('span.count .total').text());
          $('span.count .total').text(previous_action == 'like' ?
          previous_likes + 1 : previous_likes - 1);
        }
      }
    );
  });
    });
  </script>

  </body>
</html>

{% endblock %}
